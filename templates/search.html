<!-- templates/search.html -->
<!doctype html>
<html>
  <link rel="stylesheet" href="../static/css/output.css">
  <body class=" p-12 w-screen h-screen overflow-x-clip bg-cyan-700 grid place-content-center">
    
    <section class="m-auto grid place-content-center">

      <div class="flex items-center m-auto gap-2 mb-6">
        <a href="/">
          <button
            class="cursor-pointer bg-white relative inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-[#F5F5F5] hover:text-[#06B6D4] h-9 rounded-md px-3"
          >
            <svg
              class="lucide lucide-rocket text-cyan-500 dark:text-cyan-400"
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              stroke="#06B6D4"
              fill="none"
              viewBox="0 0 24 24"
              height="22"
              width="22"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"
              ></path>
              <path
                d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"
              ></path>
              <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"></path>
              <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"></path>
            </svg>
            Search movies
          </button>
        </a>
        <a href="/movie_list">
          <button
            class="cursor-pointer bg-white relative inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-[#F5F5F5] hover:text-[#60A5FA] h-9 rounded-md px-3"
          >
            <svg
              class="lucide lucide-newspaper text-blue-400 dark:text-blue-600"
              stroke-linejoin="round"
              stroke-linecap="round"
              stroke-width="2"
              stroke="#60A5FA"
              fill="none"
              viewBox="0 0 24 24"
              height="22"
              width="22"
              xmlns="http://www.w3.org/2000/svg"
            >
            <path d="M18 8a2 2 0 0 0 0-4 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0-4 0 2 2 0 0 0 0 4"/><path d="M10 22 9 8"/><path d="m14 22 1-14"/><path d="M20 8c.5 0 .9.4.8 1l-2.6 12c-.1.5-.7 1-1.2 1H7c-.6 0-1.1-.4-1.2-1L3.2 9c-.1-.6.3-1 .8-1Z"/>
            </svg>
            Movie list
          </button>
        </a>
        <a href="/stats">
          <button
          class="cursor-pointer bg-white relative inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-[#F5F5F5] hover:text-[#FB923C] h-9 rounded-md px-3"
        >
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-orange-400 dark:text-orange-600 lucide lucide-chart-column-icon lucide-chart-column"><path d="M3 3v16a2 2 0 0 0 2 2h16"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></svg>
          Movies Stats
        </button>
        </a>
      </div>

      <h1 class="text-center font-extrabold text-3xl text-white mb-4">Search for a movie and add<br> it to your favourite movielist</h1>
      <form class="flex" action="/search" method="get">
        <div class="flex w-10 items-center justify-center rounded-tl-lg rounded-bl-lg border-r border-gray-200 bg-white p-5">
          <svg viewBox="0 0 20 20" aria-hidden="true" class="pointer-events-none absolute w-5 fill-gray-500 transition">
            <path d="M16.72 17.78a.75.75 0 1 0 1.06-1.06l-1.06 1.06ZM9 14.5A5.5 5.5 0 0 1 3.5 9H2a7 7 0 0 0 7 7v-1.5ZM3.5 9A5.5 5.5 0 0 1 9 3.5V2a7 7 0 0 0-7 7h1.5ZM9 3.5A5.5 5.5 0 0 1 14.5 9H16a7 7 0 0 0-7-7v1.5Zm3.89 10.45 3.83 3.83 1.06-1.06-3.83-3.83-1.06 1.06ZM14.5 9a5.48 5.48 0 0 1-1.61 3.89l1.06 1.06A6.98 6.98 0 0 0 16 9h-1.5Zm-1.61 3.89A5.48 5.48 0 0 1 9 14.5V16a6.98 6.98 0 0 0 4.95-2.05l-1.06-1.06Z"></path>
          </svg>
        </div>
        <input class="w-[360px] bg-white p-4 -mr-2 text-base font-semibold outline-0" type="text" name="q" placeholder="Write movie title">
        <button type="submit" class="bg-cyan-300 p-4 rounded-tr-lg rounded-br-lg text-zinc-800 font-semibold hover:bg-blue-800 transition-colors">Search</button>
      </form>
    </section>

    <section class="min-h-[500px] mt-4 w-[90vw] rounded-md p-8 bg-cyan-800">
      {% if movies %}
        <ul class="grid place-content-center">
          {% for m in movies %}
            {% if m.Title %}
            <li class="relative flex flex-col text-gray-700 bg-white shadow-md bg-clip-border rounded-xl w-72">
              <div class="relative mx-4 mt-4 overflow-hidden text-gray-700 bg-white bg-clip-border rounded-xl h-52">
                  <img
                      src={{m.Poster}}
                      alt="card-image" class="object-cover w-full h-full" />
              </div>
              <div class="p-6">
                  <div class="flex items-center justify-between mb-2">
                      <p class="block font-sans text-base antialiased font-medium leading-relaxed text-blue-gray-900">
                        {{ m.Title }}
                      </p>
                      <p class="block font-sans text-base antialiased font-medium leading-relaxed text-blue-gray-900">
                        ({{ m.Year }})
                      </p>
                  </div>
                  <p class="block font-sans text-sm antialiased font-normal leading-normal text-gray-700 opacity-75 max-h-[120px] overflow-clip">
                      {{ m.Plot }}
                  </p>
              </div>
              <form method="post" action="/save" class="p-6 pt-0">
                <input type="hidden" name="id"       value="{{ m.imdbID }}">
                <input type="hidden" name="title"    value="{{ m.Title }}">
                <input type="hidden" name="year"     value="{{ m.Year }}">
                <input type="hidden" name="plot"     value="{{ m.Plot }}">
                <input type="hidden" name="poster"   value="{{ m.Poster }}">
                <input type="hidden" name="director" value="{{ m.Director }}">
                <input type="hidden" name="genre"    value="{{ m.Genre }}">
                <input type="hidden" name="awards"   value="{{ m.Awards }}">
                <input type="hidden" name="rating"
                value="{{ (m.Ratings 
                             | selectattr('Source','equalto','Rotten Tomatoes') 
                             | map(attribute='Value') 
                             | first) }}">
                <button
                  class="align-middle bg-cyan-400 select-none font-sans font-bold text-center uppercase transition-all disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs py-3 px-6 rounded-lg shadow-gray-900/10 hover:shadow-gray-900/20 focus:opacity-[0.85] active:opacity-[0.85] active:shadow-none block w-full bg-blue-gray-900/10 text-blue-gray-900 shadow-none hover:scale-105 hover:shadow-none focus:scale-105 focus:shadow-none active:scale-100"
                  type="submit">
                  Add to favourite movies
                </button>
              </form>
              
            </li>
            {% endif %}
          {% endfor %}
        </ul>
      {% else %}
      <aside class="grid place-content-center h-full text-center">
        {% if status %}
          <p class="text-gray-400 text-lg">Movie was added successfully!</p>
          <p class="text-gray-400">Search for a new movie above..</p>
          <button>Visit your favourite movielist</button>
        {% else %}
          <p class="text-gray-400 text-lg">Available movie results will display here</p>
          <p class="text-gray-400">Search for a movie above..</p>
        {% endif %}
      </aside>
        {% if status %}
        <div class="fixed top-4 right-4">
          <div
          role="alert"
          class="bg-green-300 dark:bg-green-900 border-l-4 border-green-500 dark:border-green-700 text-green-900 dark:text-green-100 p-2 rounded-lg flex items-center transition duration-300 ease-in-out hover:bg-green-200 dark:hover:bg-green-800 transform hover:scale-105"
        >
          <svg
            stroke="currentColor"
            viewBox="0 0 24 24"
            fill="none"
            class="h-5 w-5 flex-shrink-0 mr-2 text-green-600"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M13 16h-1v-4h1m0-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
              stroke-width="2"
              stroke-linejoin="round"
              stroke-linecap="round"
            ></path>
          </svg>
          <p class="text-xs font-semibold">Success - movie was added succesfully!</p>
        </div>
        </div>
        {% endif %}
      {% endif %}
    </section>
    
  </body>
</html>